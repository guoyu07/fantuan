<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Fantuan by whusnoopy</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Fantuan</h1>
        <p>A simple fantuan financial tools based on django</p>

        <p class="view"><a href="https://github.com/whusnoopy/fantuan">View the Project on GitHub <small>whusnoopy/fantuan</small></a></p>


        <ul>
          <li><a href="https://github.com/whusnoopy/fantuan/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/whusnoopy/fantuan/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/whusnoopy/fantuan">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="%E9%A5%AD%E5%9B%A2-fantuan" class="anchor" href="#%E9%A5%AD%E5%9B%A2-fantuan"><span class="octicon octicon-link"></span></a>饭团 (fantuan)</h1>

<p>A simple fantuan financial tools based on django</p>

<p>Fantuan is a free software, you can use, modify or distribute it without restriction, visit <a href="http://whusnoopy.github.io/fantuan/LICENSE.html">http://whusnoopy.github.io/fantuan/LICENSE.html</a> for more detail</p>

<p>一个简单的基于 django 的饭团记账系统</p>

<p>饭团是一个自由软件, 您可以免费使用, 修改和再分发, 详见 <a href="http://whusnoopy.github.io/fantuan/LICENSE.html">http://whusnoopy.github.io/fantuan/LICENSE.html</a></p>

<h1>
<a name="%E7%8E%AF%E5%A2%83%E4%BE%9D%E8%B5%96" class="anchor" href="#%E7%8E%AF%E5%A2%83%E4%BE%9D%E8%B5%96"><span class="octicon octicon-link"></span></a>环境依赖</h1>

<h2>
<a name="%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83" class="anchor" href="#%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83"><span class="octicon octicon-link"></span></a>系统环境</h2>

<ul>
<li>python2.7 (运行 django 所需环境)</li>
<li>sqlite3 (本地数据库)</li>
</ul>

<h2>
<a name="python-%E5%BA%93" class="anchor" href="#python-%E5%BA%93"><span class="octicon octicon-link"></span></a>Python 库</h2>

<ul>
<li>django (基于 django 1.5 开发, 其他版本没做测试)</li>
<li>python-flup (用 fastcgi 模式运行 django)</li>
</ul>

<h1>
<a name="%E5%AE%89%E8%A3%85%E8%BF%90%E8%A1%8C" class="anchor" href="#%E5%AE%89%E8%A3%85%E8%BF%90%E8%A1%8C"><span class="octicon octicon-link"></span></a>安装运行</h1>

<h2>
<a name="%E8%8E%B7%E5%8F%96%E4%BB%A3%E7%A0%81" class="anchor" href="#%E8%8E%B7%E5%8F%96%E4%BB%A3%E7%A0%81"><span class="octicon octicon-link"></span></a>获取代码</h2>

<p>git clone 本项目, 进入目录</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>git clone https://github.com/whusnoopy/fantuan.git
<span class="nv">$ </span><span class="nb">cd </span>fantuan
</pre></div>

<h2>
<a name="%E5%BB%BA%E7%AB%8B%E5%BC%80%E5%8F%91%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83" class="anchor" href="#%E5%BB%BA%E7%AB%8B%E5%BC%80%E5%8F%91%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83"><span class="octicon octicon-link"></span></a>建立开发运行环境</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>virtualenv ve
<span class="nv">$ </span><span class="nb">source </span>ve/bin/activate
<span class="nv">$ </span>pip install -r requirements.txt
</pre></div>

<h2>
<a name="%E7%94%9F%E6%88%90%E6%9C%AC%E5%9C%B0%E6%95%B0%E6%8D%AE%E5%BA%93" class="anchor" href="#%E7%94%9F%E6%88%90%E6%9C%AC%E5%9C%B0%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="octicon octicon-link"></span></a>生成本地数据库</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>python manage.py syncdb
</pre></div>

<blockquote>
<p>可修改 <code>fantuan/settings.py</code> 里 sqlite 本地数据库的地址</p>
</blockquote>

<h2>
<a name="%E5%90%AF%E5%8A%A8" class="anchor" href="#%E5%90%AF%E5%8A%A8"><span class="octicon octicon-link"></span></a>启动</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>python manager.py runserver 0.0.0.0:8000
</pre></div>

<h1>
<a name="fastcgi--nginx-%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C" class="anchor" href="#fastcgi--nginx-%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C"><span class="octicon octicon-link"></span></a>fastcgi + nginx 模式运行</h1>

<h2>
<a name="%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E6%B1%87%E9%9B%86" class="anchor" href="#%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E6%B1%87%E9%9B%86"><span class="octicon octicon-link"></span></a>静态文件汇集</h2>

<pre><code>$ python manager.py collectstatic
</code></pre>

<h2>
<a name="%E4%BF%AE%E6%94%B9-nginx-%E7%9A%84%E8%BD%AC%E5%8F%91%E8%A7%84%E5%88%99" class="anchor" href="#%E4%BF%AE%E6%94%B9-nginx-%E7%9A%84%E8%BD%AC%E5%8F%91%E8%A7%84%E5%88%99"><span class="octicon octicon-link"></span></a>修改 nginx 的转发规则</h2>

<p>下面是一个 nginx conf 文件样例:</p>

<div class="highlight highlight-bash"><pre>server <span class="o">{</span>
    listen 80<span class="p">;</span>
    server_name fantuan.yourdomain.com<span class="p">;</span>

    <span class="c"># fastcgi 参数传递 修改为自己的路径</span>
    location / <span class="o">{</span>
      include fastcgi_params<span class="p">;</span>
      fastcgi_split_path_info ^<span class="o">()(</span>.*<span class="o">)</span><span class="nv">$;</span>
      fastcgi_pass unix:/home/yourname/fantuan/fastcgi.sock<span class="p">;</span>
    <span class="o">}</span>

    <span class="c"># 静态文件重定向, 修改为自己的路径</span>
    location /static/admin/ <span class="o">{</span>
      <span class="nb">alias</span> /home/yourname/fantuan/static/<span class="p">;</span>
      expires 30d<span class="p">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<h2>
<a name="%E8%BF%90%E8%A1%8C" class="anchor" href="#%E8%BF%90%E8%A1%8C"><span class="octicon octicon-link"></span></a>运行</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>sh start_fantuan.sh
</pre></div>

<h1>
<a name="%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97" class="anchor" href="#%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97"><span class="octicon octicon-link"></span></a>使用指南</h1>

<p>使用 <a href="http://yourdomain.com">http://yourdomain.com</a> 来访问查看, 通过 <a href="http://yourdomain.com/admin">http://yourdomain.com/admin</a> 来管理</p>

<p>建议只对 [消费记录] 做添加修改操作, 注意事项在管理界面里有内嵌提示, [餐厅] 和 [人员] 可以在 [消费记录] 里更改</p>

<p>支持转账操作, 自行添加一个 [转账] 的虚拟餐厅, 转账的消费记录里, 付款人选转出者, 参与人选转入者 (其他人都不选), 则可以保持账面平衡</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/whusnoopy">whusnoopy</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>